(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,n){e.exports=n(333)},200:function(e,t,n){},333:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(25),c=n.n(i),r=(n(200),n(38)),u=n(39),o=n(42),s=n(40),d=n(43),m=n(35),g=n.n(m),f=n(36),p=n.n(f),b=n(37),h=n.n(b),E=n(12),v=Object(E.createStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}}),B=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement(g.a,{position:"static",color:"primary"},l.a.createElement(p.a,null,l.a.createElement(h.a,{variant:"h6",color:"inherit"},"Eloyeni")))}}]),t}(a.Component),j=Object(E.withStyles)(v)(B),O=n(13),y={container:Object(O.a)({height:"100%",width:"100%",$nest:{".wrapper":{width:"100%",display:"flex",$nest:{nav:{width:"300px"}}}}})},w=n(109),S=n(56);function x(){return{selectedBuilding:null,buildings:[]}}function k(e,t){switch(t.type){case"selectBuilding":return Object(S.a)({},e,{selectedBuilding:t.selectedBuilding});case"setBuildings":return Object(S.a)({},e,{selectedBuilding:t.buildings[0],buildings:t.buildings});case"reset":return{selectedBuilding:null,buildings:[]};default:throw new Error}}var C={leftNavContainer:Object(O.a)({display:"flex",flexDirection:"column",$nest:{li:{display:"flex",flexDirection:"column",alignItems:"baseline"}}}),navItem:Object(O.a)({})},I=n(9),U=l.a.createElement(I.g,{component:"div"},"City Buildings");var N=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.f,{component:"nav",subheader:U,className:C.leftNavContainer},e.buildings.map(function(t,n){var a=e.selectedBuilding?e.buildings.findIndex(function(t){return t.id===e.selectedBuilding.id}):-1;return l.a.createElement(I.h,{key:n,selected:n===a,onClick:function(){return e.selectBuilding({type:"selectBuilding",selectedBuilding:t})}},t.name)})))},A=n(101),D=n.n(A),K=n(26),L=n(108),W=function(e){var t;return Object(O.a)({display:"flex",$nest:(t={},Object(K.a)(t,"#".concat(e),{fill:Object(L.b)(255,255,255,.3).toString(),stroke:"#d93381"}),Object(K.a)(t,"g",{strokeWidth:3,fill:"#00c4ff75"}),t)})},$=n(110),F=n(106),J=function(e){var t=e.mapSrc,n=e.buildingState,a=n.selectedBuilding,i=n.buildings,c=a?a.id:"b1";return l.a.createElement("main",{className:W(c)},t?l.a.createElement($.a,{src:t,onClick:function(t){var n=function(e){return i.find(function(t){return t.id===e})}(Object(F.get)(t,"target.parentElement.id"));n&&e.selectBuilding({type:"selectBuilding",selectedBuilding:n})}}):null)},T={buildingInfoContainer:Object(O.a)({margin:"2em",width:"400px",height:"400px",display:"flex",flexDirection:"column"}),table:Object(O.a)({marginTop:"auto",marginBottom:"1em"})},G=function(e){var t=e.selectedBuilding,n=t||{id:"",name:"Select a building",description:"Select a building in the nav panel or on the map",color:"#fff",status:null,infestationLevel:null};return l.a.createElement(I.a,{className:T.buildingInfoContainer},l.a.createElement(I.b,null,l.a.createElement(I.d,null,l.a.createElement(I.n,{gutterBottom:!0,variant:"h5",component:"h2"},n.name),l.a.createElement(I.n,{component:"p"},n.description))),l.a.createElement(I.c,{className:T.table},n.status?l.a.createElement(I.i,null,l.a.createElement(I.l,null,l.a.createElement(I.m,null,l.a.createElement(I.k,null,"Status"),l.a.createElement(I.k,null,"Infestation Level"))),l.a.createElement(I.j,null,l.a.createElement(I.m,null,l.a.createElement(I.k,null,n.status),l.a.createElement(I.k,null,n.infestationLevel?l.a.createElement(I.e,{color:"primary",label:n.infestationLevel}):null)))):null))},R=1619131081,Y="AKIATDK53YFTSCKWJ7UY",z="eloyeni2.s3.amazonaws.com/";var M=function(e){var t,n=void 0,i=void 0,c=Object(a.useReducer)(k,void 0,x),r=Object(w.a)(c,2),u=r[0],o=r[1];if(e.auth){var s=e.auth,d=s.mapUrl,m=s.mapSig;n=e.auth.navUrl,i=e.auth.navSig,t="https://".concat(z).concat(d,"?AWSAccessKeyId=").concat(Y,"&Signature=").concat(m,"&Expires=").concat(R)}return Object(a.useEffect)(function(){e.auth&&n&&i&&D.a.get("https://".concat(z).concat(n,"?AWSAccessKeyId=").concat(Y,"&Signature=").concat(i,"&Expires=").concat(R)).then(function(e){o({type:"setBuildings",buildings:e.data.buildings})})},[i,n,e.auth]),l.a.createElement(l.a.Fragment,null,l.a.createElement(N,{buildings:u.buildings,selectBuilding:o,selectedBuilding:u.selectedBuilding}),l.a.createElement(J,{selectBuilding:o,buildingState:u,mapSrc:t}),l.a.createElement(G,{selectedBuilding:u.selectedBuilding}))},q=n(107),H=n.n(q),P=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=H.a.parse(window.location.search.slice(1));(e.mapUrl||e.navUrl)&&this.setState({mapUrl:e.mapUrl,mapSig:e.mapSig,navUrl:e.navUrl,navSig:e.navSig})}},{key:"render",value:function(){return l.a.createElement("div",{className:y.container},l.a.createElement(j,null),l.a.createElement("div",{className:"wrapper"},l.a.createElement(M,{auth:this.state})))}}]),t}(a.Component);c.a.render(l.a.createElement(P,null),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.ae6b3658.chunk.js.map